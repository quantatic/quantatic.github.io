(()=>{"use strict";var e,t,r,n,o,a,s={161:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(81),o=r.n(n),a=r(645),s=r.n(a)()(o());s.push([e.id,"canvas {\n    outline: 1px solid black;\n}",""]);const i=s},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(n)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(s[c]=!0)}for(var u=0;u<e.length;u++){var l=[].concat(e[u]);n&&s[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),r&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=r):l[2]=r),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),t.push(l))}},t}},81:e=>{e.exports=function(e){return e[1]}},15:(e,t,r)=>{var n=r(379),o=r.n(n),a=r(795),s=r.n(a),i=r(569),c=r.n(i),u=r(565),l=r.n(u),p=r(216),f=r.n(p),d=r(589),h=r.n(d),m=r(161),b={};b.styleTagTransform=h(),b.setAttributes=l(),b.insert=c().bind(null,"head"),b.domAPI=s(),b.insertStyleElement=f(),o()(m.Z,b),m.Z&&m.Z.locals&&m.Z.locals},379:e=>{var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var a={},s=[],i=0;i<e.length;i++){var c=e[i],u=n.base?c[0]+n.base:c[0],l=a[u]||0,p="".concat(u," ").concat(l);a[u]=l+1;var f=r(p),d={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==f)t[f].references++,t[f].updater(d);else{var h=o(d,n);n.byIndex=i,t.splice(i,0,{identifier:p,updater:h,references:1})}s.push(p)}return s}function o(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,o){var a=n(e=e||[],o=o||{});return function(e){e=e||[];for(var s=0;s<a.length;s++){var i=r(a[s]);t[i].references--}for(var c=n(e,o),u=0;u<a.length;u++){var l=r(a[u]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}a=c}}},569:e=>{var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,r)=>{e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,o&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var a=r.sourceMap;a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},404:(e,t,r)=>{r.a(e,(async(e,t)=>{try{var n=r(838),o=(r(15),e([n]));n=(o.then?(await o)():o)[0];const a=4;let s=null;const i=document.getElementById("file-upload");i.addEventListener("input",(e=>{i.files[0].arrayBuffer().then((e=>{s=new n.G2(new Uint8Array(e))}))}));const c=(e,t)=>{if(null!==s)switch(e){case"x":s.setButtonPressed(n.L$.A,t);break;case"z":s.setButtonPressed(n.L$.B,t);break;case"Enter":s.setButtonPressed(n.L$.Start,t);break;case"Shift":s.setButtonPressed(n.L$.Select,t);break;case"ArrowUp":s.setButtonPressed(n.L$.Up,t);break;case"ArrowDown":s.setButtonPressed(n.L$.Down,t);break;case"ArrowLeft":s.setButtonPressed(n.L$.Left,t);break;case"ArrowRight":s.setButtonPressed(n.L$.Right,t);break;default:console.log(`don't know how to handle: ${e} pressed: ${t}`)}};document.addEventListener("keydown",(e=>{c(e.key,!0)})),document.addEventListener("keyup",(e=>{c(e.key,!1)}));const u=n.G2.ppuWidth(),l=n.G2.ppuHeight(),p=document.getElementById("render-canvas");p.width=u*a,p.height=l*a;const f=p.getContext("2d");f.fillStyle="red",f.fillRect(50,50,50,50),f.fillStyle="green",f.fillRect(80,80,50,50);const d=()=>{if(null===s)return;for(let e=0;e<25e3;e++)s.step();const e=s.buffer();for(let t=0;t<l;t++)for(let r=0;r<u;r++){const n=3*(t*u+r),[o,s,i]=e.slice(n,n+3);f.fillStyle=`rgb(${o}, ${s}, ${i})`,f.fillRect(r*a,t*a,a,a)}},h=()=>{d(),requestAnimationFrame(h)};requestAnimationFrame(h),t()}catch(e){t(e)}}))},838:(e,t,r)=>{r.a(e,(async(n,o)=>{try{r.d(t,{G2:()=>m,Hv:()=>b,L$:()=>h,Or:()=>y});var a=r(530);e=r.hmd(e);var s=n([a]);a=(s.then?(await s)():s)[0];let i=new("undefined"==typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});i.decode();let c=null;function u(){return null!==c&&c.buffer===a.memory.buffer||(c=new Uint8Array(a.memory.buffer)),c}let l=0;function p(e,t){const r=t(1*e.length);return u().set(e,r/1),l=e.length,r}let f=null;function d(){return null!==f&&f.buffer===a.memory.buffer||(f=new Int32Array(a.memory.buffer)),f}const h=Object.freeze({A:0,0:"A",B:1,1:"B",Up:2,2:"Up",Down:3,3:"Down",Left:4,4:"Left",Right:5,5:"Right",Select:6,6:"Select",Start:7,7:"Start"});class m{static __wrap(e){const t=Object.create(m.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();a.__wbg_emulator_free(e)}constructor(e){const t=p(e,a.__wbindgen_malloc),r=l,n=a.emulator_new(t,r);return m.__wrap(n)}step(){a.emulator_step(this.ptr)}buffer(){try{const s=a.__wbindgen_add_to_stack_pointer(-16);a.emulator_buffer(s,this.ptr);var e=d()[s/4+0],t=d()[s/4+1],r=(n=e,o=t,u().subarray(n/1,n/1+o)).slice();return a.__wbindgen_free(e,1*t),r}finally{a.__wbindgen_add_to_stack_pointer(16)}var n,o}setButtonPressed(e,t){a.emulator_setButtonPressed(this.ptr,e,t)}static ppuWidth(){return a.emulator_ppuWidth()>>>0}static ppuHeight(){return a.emulator_ppuHeight()>>>0}}function b(){return Date.now()}function y(e,t){throw new Error((r=e,n=t,i.decode(u().subarray(r,r+n))));var r,n}o()}catch(v){o(v)}}))},530:(e,t,r)=>{r.a(e,(async(n,o)=>{try{var a,s=n([a=r(838)]),[a]=s.then?(await s)():s;await r.v(t,e.id,"c11d9546ea39aa373554",{"./index_bg.js":{__wbg_now_04bcd3bf9fb6165e:a.Hv,__wbindgen_throw:a.Or}}),o()}catch(e){o(e)}}),1)}},i={};function c(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={id:e,loaded:!1,exports:{}};return s[e](r,r.exports,c),r.loaded=!0,r.exports}e="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&(e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},o=e=>!--e.r&&e(),a=(e,t)=>e?e.push(t):o(t),c.a=(s,i,c)=>{var u,l,p,f=c&&[],d=s.exports,h=!0,m=!1,b=(t,r,n)=>{m||(m=!0,r.r+=t.length,t.map(((t,o)=>t[e](r,n))),m=!1)},y=new Promise(((e,t)=>{p=t,l=()=>(e(d),n(f),f=0)}));y[t]=d,y[e]=(e,t)=>{if(h)return o(e);u&&b(u,e,t),a(f,e),y.catch(t)},s.exports=y,i((s=>{var i;u=(s=>s.map((s=>{if(null!==s&&"object"==typeof s){if(s[e])return s;if(s.then){var i=[];s.then((e=>{c[t]=e,n(i),i=0}),(e=>{c[r]=e,n(i),i=0}));var c={};return c[e]=(e,t)=>(a(i,e),s.catch(t)),c}}var u={};return u[e]=e=>o(e),u[t]=s,u})))(s);var c=()=>u.map((e=>{if(e[r])throw e[r];return e[t]})),l=new Promise(((e,t)=>{(i=()=>e(c)).r=0,b(u,i,t)}));return i.r?l:c()}),(e=>(e&&p(y[r]=e),l()))),h=!1},c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.v=(e,t,r,n)=>{var o=fetch(c.p+""+r+".module.wasm");return"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(o,n).then((t=>Object.assign(e,t.instance.exports))):o.then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,n))).then((t=>Object.assign(e,t.instance.exports)))},(()=>{var e;c.g.importScripts&&(e=c.g.location+"");var t=c.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),c.p=e})(),c(404)})();